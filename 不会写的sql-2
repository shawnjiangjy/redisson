<!-- 将sql语句直接写到foreach的open里面 -->
 <sql id="popQueryCondition">
        <foreach collection="vos" open="and LOWER(t.EMPLOYEE_ID) in (" item="item" separator=","
                     close=")">
                LOWER(#{item.employeeId,jdbcType=VARCHAR})
        </foreach>
    </sql>

<!-- 时间比较
  t.TRAIN_DATE：字段在mysql的数据类型需是datetime类型
  str_to_date()函数将字符串转成datetimen类型
-->
 <if test='vo.trainStartTime != null and vo.trainStartTime !="" and vo.trainEndTime != null and vo.trainEndTime !="" '>
            and t.TRAIN_DATE between str_to_date(#{vo.trainStartTime,jdbcType=VARCHAR},'%Y-%m-%d %H:%i:%s') and
            str_to_date(#{vo.trainEndTime,jdbcType=VARCHAR},'%Y-%m-%d %H:%i:%s')
        </if>



<!-- 批量编辑 -->
 <update id="batchUpdate">
        <if test='vos != null and vos.size()>0'>
            <foreach collection="vos" item="vo" close=";" separator=";">
                UPDATE t_occ_hr_security_train set
                <if test='vo.learningMethod != null'>
                    LEARNING_METHOD = #{vo.learningMethod,jdbcType=VARCHAR},
                </if>
                <if test='vo.isTraining != null'>
                    IS_TRAINING = #{vo.isTraining,jdbcType=VARCHAR},
                </if>
                <if test='vo.trainDate != null'>
                    TRAIN_DATE = #{vo.trainDate},
                </if>
                <if test='vo.trainOrgan != null'>
                    TRAIN_ORGAN = #{vo.trainOrgan,jdbcType=VARCHAR},
                </if>
                <if test='vo.lastUpdatePerson != null '>
                    LAST_UPDATE_PERSON = #{vo.lastUpdatePerson,jdbcType=VARCHAR},
                </if>
                <if test='vo.attachmentName != null '>
                    ATTACHMENT_NAME = #{vo.attachmentName,jdbcType=VARCHAR},
                </if>
                <if test='vo.remark != null'>
                    REMARK = #{vo.remark},
                </if>
                LAST_UPDATE_TIME = sysdate()
                where ID = #{vo.id}
            </foreach>
        </if>
    </update>
